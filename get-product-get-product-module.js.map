{"version":3,"sources":["./src/pages/product/get-product/get-product.html","./src/pages/product/get-product/get-product.module.ts","./src/pages/product/get-product/get-product.ts"],"names":[],"mappings":"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","file":"get-product-get-product-module.js","sourcesContent":["export default \"<div *ngIf=\\\"selectedOrder?.isCancelled\\\" class=\\\"money-amount-container\\\">\\n\\t<div class=\\\"money-amount\\\">\\n\\t\\t<!-- TODO add translate -->\\n\\t\\tThe customer cancel order\\n\\t</div>\\n</div>\\n\\n<div class=\\\"carrier-view\\\">\\n\\t<img\\n\\t\\tclass=\\\"product-image\\\"\\n\\t\\tsrc=\\\"{{ (selectedOrder?.products)[0].product.images[0].url }}\\\"\\n\\t/>\\n\\t<div class=\\\"bottom-container\\\">\\n\\t\\t<div class=\\\"info\\\">\\n\\t\\t\\t<span class=\\\"left-info\\\"\\n\\t\\t\\t\\t>{{\\n\\t\\t\\t\\tlocaleTranslate((selectedOrder?.products)[0]?.product?.title)\\n\\t\\t\\t\\t}}</span\\n\\t\\t\\t>\\n\\t\\t\\t<span class=\\\"right-text\\\">#{{ selectedOrder?.orderNumber }}</span>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"buttons\\\">\\n\\t\\t\\t<div *ngIf=\\\"!selectedOrder?.isCancelled\\\" class=\\\"button-bar\\\">\\n\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t*ngIf=\\\"!selectedOrder?.isCancelled\\\"\\n\\t\\t\\t\\t\\t[disabled]=\\\"disabledButtons\\\"\\n\\t\\t\\t\\t\\tclass=\\\"button button-brand\\\"\\n\\t\\t\\t\\t\\t(click)=\\\"gotProduct()\\\"\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t{{ 'GET_PRODUCT_VIEW.GOT_IT' | translate }}\\n\\t\\t\\t\\t</button>\\n\\n\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t[disabled]=\\\"disabledButtons\\\"\\n\\t\\t\\t\\t\\tclass=\\\"button button-assertive\\\"\\n\\t\\t\\t\\t\\t(click)=\\\"cancelWork()\\\"\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t{{ 'GET_PRODUCT_VIEW.CANCEL' | translate }}\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t</div>\\n\\n\\t\\t\\t<div class=\\\"button-bar\\\" *ngIf=\\\"selectedOrder?.isCancelled\\\">\\n\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\tclass=\\\"button button-assertive\\\"\\n\\t\\t\\t\\t\\t(click)=\\\"unselectOrder()\\\"\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t{{ 'OK' | translate }}\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n\"","import { NgModule } from '@angular/core';\nimport { GetProductPage } from './get-product';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\n\nconst routes: Routes = [\n\t{\n\t\tpath: '',\n\t\tcomponent: GetProductPage,\n\t},\n];\n\n@NgModule({\n\tdeclarations: [GetProductPage],\n\timports: [\n\t\tTranslateModule.forChild(),\n\t\tRouterModule.forChild(routes),\n\t\tCommonModule,\n\t],\n})\nexport class GetProductPageModule {}\n","import { Component, OnDestroy } from '@angular/core';\nimport ICarrier from '@modules/server.common/interfaces/ICarrier';\nimport IOrder from '@modules/server.common/interfaces/IOrder';\nimport { OrderRouter } from '@modules/client.common.angular2/routers/order-router.service';\nimport { CarrierRouter } from '@modules/client.common.angular2/routers/carrier-router.service';\nimport OrderCarrierStatus from '@modules/server.common/enums/OrderCarrierStatus';\nimport { CarrierOrdersRouter } from '@modules/client.common.angular2/routers/carrier-orders-router.service';\nimport { ILocaleMember } from '@modules/server.common/interfaces/ILocale';\nimport { ProductLocalesService } from '@modules/client.common.angular2/locale/product-locales.service';\nimport { Store } from '../../../services/store.service';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { NavController } from '@ionic/angular';\n\n@Component({\n\tselector: 'page-get-product',\n\ttemplateUrl: 'get-product.html',\n})\nexport class GetProductPage implements OnDestroy {\n\tcarrier: ICarrier;\n\tselectedOrder: IOrder;\n\tdisabledButtons: boolean = true;\n\n\tprivate destroy$ = new Subject<void>();\n\n\tconstructor(\n\t\tprivate orderRouter: OrderRouter,\n\t\tprivate carrierRouter: CarrierRouter,\n\t\tprivate carrierOrdersRouter: CarrierOrdersRouter,\n\t\tprivate _translateProductLocales: ProductLocalesService,\n\t\tprivate store: Store,\n\t\tprivate navCtrl: NavController\n\t) {}\n\n\tionViewWillEnter() {\n\t\tthis.loadData();\n\t}\n\n\tasync gotProduct() {\n\t\tthis.disabledButtons = true;\n\t\tif (this.carrier && this.selectedOrder) {\n\t\t\tawait this.carrierOrdersRouter.updateStatus(\n\t\t\t\tthis.carrier['id'],\n\t\t\t\tOrderCarrierStatus.CarrierPickedUpOrder\n\t\t\t);\n\n\t\t\tthis.navCtrl.navigateRoot('/main/starting-delivery');\n\t\t} else {\n\t\t\t// TODO: replace with popup\n\t\t\talert('Try again!');\n\t\t}\n\t\tthis.disabledButtons = false;\n\t}\n\n\tasync cancelWork() {\n\t\tthis.disabledButtons = true;\n\t\tif (this.carrier && this.selectedOrder) {\n\t\t\tawait this.carrierOrdersRouter.cancelDelivery(this.carrier['id'], [\n\t\t\t\tthis.selectedOrder['id'],\n\t\t\t]);\n\n\t\t\tthis.unselectOrder();\n\t\t} else {\n\t\t\t// \t// TODO: replace with popup\n\t\t\talert('Try again!');\n\t\t}\n\t\tthis.disabledButtons = false;\n\t}\n\n\tlocaleTranslate(member: ILocaleMember[]): string {\n\t\treturn this._translateProductLocales.getTranslate(member);\n\t}\n\n\tprivate async loadData() {\n\t\tthis.carrier = await this.carrierRouter\n\t\t\t.get(this.store.carrierId)\n\t\t\t.pipe(first())\n\t\t\t.toPromise();\n\n\t\tthis.orderRouter\n\t\t\t.get(this.store.orderId, {\n\t\t\t\tpopulateWarehouse: true,\n\t\t\t})\n\t\t\t.pipe(takeUntil(this.destroy$))\n\t\t\t.subscribe((o) => {\n\t\t\t\tthis.selectedOrder = o;\n\t\t\t\tthis.store.selectedOrder = o;\n\t\t\t\tthis.disabledButtons = false;\n\t\t\t});\n\t}\n\n\tunselectOrder() {\n\t\tthis.store.selectedOrder = null;\n\t\tlocalStorage.removeItem('orderId');\n\n\t\tthis.navCtrl.navigateRoot('/main/home');\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.destroy$.next();\n\t\tthis.destroy$.complete();\n\t}\n}\n"],"sourceRoot":"webpack:///"}