{"version":3,"sources":["./src/pages/product/return-product/return-product.html","./src/pages/product/return-product/return-product.module.ts","./src/pages/product/return-product/return-product.ts"],"names":[],"mappings":"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","file":"return-product-return-product-module.js","sourcesContent":["export default \"<div *ngIf=\\\"selectedOrder?.isCancelled\\\" class=\\\"money-amount-container\\\">\\n\\t<div class=\\\"money-amount\\\">\\n\\t\\t<!-- TODO add translate -->\\n\\t\\tThe customer cancel order\\n\\t</div>\\n</div>\\n\\n<div class=\\\"carrier-view\\\">\\n\\t<img\\n\\t\\tclass=\\\"product-image\\\"\\n\\t\\tsrc=\\\"{{ (selectedOrder?.products)[0].product.images[0].url }}\\\"\\n\\t/>\\n\\t<div class=\\\"bottom-container\\\">\\n\\t\\t<div class=\\\"info\\\">\\n\\t\\t\\t<span class=\\\"left-info\\\"\\n\\t\\t\\t\\t>{{\\n\\t\\t\\t\\tlocaleTranslate((selectedOrder?.products)[0]?.product?.title)\\n\\t\\t\\t\\t}}</span\\n\\t\\t\\t>\\n\\t\\t\\t<span class=\\\"right-text\\\">#{{ selectedOrder?.orderNumber }}</span>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"buttons\\\">\\n\\t\\t\\t<div class=\\\"button-bar\\\">\\n\\t\\t\\t\\t<button class=\\\"button button-brand\\\" (click)=\\\"returnProduct()\\\">\\n\\t\\t\\t\\t\\t{{ 'RETURN_PRODUCT_VIEW.RETURN_PRODUCT' | translate }}\\n\\t\\t\\t\\t</button>\\n\\n\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t*ngIf=\\\"allowCancel\\\"\\n\\t\\t\\t\\t\\tclass=\\\"button button-assertive\\\"\\n\\t\\t\\t\\t\\t(click)=\\\"cancelReturn()\\\"\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t{{ 'RETURN_PRODUCT_VIEW.CANCEL' | translate }}\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n\"","import { NgModule } from '@angular/core';\n\nimport { ReturnProductPage } from './return-product';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { CommonModule } from '@angular/common';\n\nconst routes: Routes = [\n\t{\n\t\tpath: '',\n\t\tcomponent: ReturnProductPage,\n\t},\n];\n\n@NgModule({\n\tdeclarations: [ReturnProductPage],\n\timports: [\n\t\tIonicModule,\n\t\tCommonModule,\n\t\tRouterModule.forChild(routes),\n\t\tTranslateModule.forChild(),\n\t],\n})\nexport class ReturnProductPageModule {}\n","import { Component, OnDestroy } from '@angular/core';\nimport { ILocaleMember } from '@modules/server.common/interfaces/ILocale';\nimport { ProductLocalesService } from '@modules/client.common.angular2/locale/product-locales.service';\nimport ICarrier from '@modules/server.common/interfaces/ICarrier';\nimport IOrder from '@modules/server.common/interfaces/IOrder';\nimport { CarrierRouter } from '@modules/client.common.angular2/routers/carrier-router.service';\nimport { OrderRouter } from '@modules/client.common.angular2/routers/order-router.service';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { Store } from 'services/store.service';\nimport OrderCarrierStatus from '@modules/server.common/enums/OrderCarrierStatus';\nimport { Subject } from 'rxjs';\nimport { NavController } from '@ionic/angular';\n\n@Component({\n\tselector: 'page-return-product',\n\ttemplateUrl: 'return-product.html',\n})\nexport class ReturnProductPage implements OnDestroy {\n\tcarrier: ICarrier;\n\tselectedOrder: IOrder;\n\n\tprivate destroy$ = new Subject<void>();\n\n\tconstructor(\n\t\tprivate translateProductLocales: ProductLocalesService,\n\t\tprivate carrierRouter: CarrierRouter,\n\t\tprivate orderRouter: OrderRouter,\n\t\tprivate store: Store,\n\t\tprivate navCtrl: NavController\n\t) {}\n\n\tget allowCancel() {\n\t\tswitch (this.store.returnProductFrom) {\n\t\t\tcase 'driveToWarehouse':\n\t\t\t\treturn false;\n\t\t\tcase 'startingDelivery':\n\t\t\t\treturn this.selectedOrder && !this.selectedOrder.isCancelled;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tionViewWillEnter() {\n\t\tthis.loadData();\n\t}\n\n\tlocaleTranslate(member: ILocaleMember[]) {\n\t\treturn this.translateProductLocales.getTranslate(member);\n\t}\n\n\tcancelReturn() {\n\t\tif (!this.allowCancel) throw new Error('Cancel not allowed!');\n\n\t\tthis.navCtrl.navigateRoot('/main/starting-delivery');\n\t}\n\n\tasync returnProduct() {\n\t\tif (!this.selectedOrder.isCancelled) {\n\t\t\tawait this.orderRouter.updateCarrierStatus(\n\t\t\t\tthis.store.orderId,\n\t\t\t\tOrderCarrierStatus.IssuesDuringDelivery\n\t\t\t);\n\n\t\t\tthis.unselectOrder();\n\n\t\t\tthis.navCtrl.navigateRoot('/main/home');\n\t\t} else {\n\t\t\tthis.unselectOrder();\n\t\t\tthis.navCtrl.navigateRoot('/main/home');\n\t\t}\n\t}\n\n\tionViewWillLeave() {\n\t\tlocalStorage.removeItem('returnProductFrom');\n\t}\n\n\tprivate async loadData() {\n\t\tthis.carrier = await this.carrierRouter\n\t\t\t.get(this.store.carrierId)\n\t\t\t.pipe(first())\n\t\t\t.toPromise();\n\n\t\tthis.orderRouter\n\t\t\t.get(this.store.orderId, {\n\t\t\t\tpopulateWarehouse: true,\n\t\t\t})\n\t\t\t.pipe(takeUntil(this.destroy$))\n\t\t\t.subscribe((o) => {\n\t\t\t\tthis.selectedOrder = o;\n\t\t\t\tthis.store.selectedOrder = o;\n\t\t\t});\n\t}\n\n\tprivate unselectOrder() {\n\t\tlocalStorage.removeItem('orderId');\n\t\tthis.store.selectedOrder = null;\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.destroy$.next();\n\t\tthis.destroy$.complete();\n\t}\n}\n"],"sourceRoot":"webpack:///"}