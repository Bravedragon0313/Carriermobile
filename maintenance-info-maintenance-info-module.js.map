{"version":3,"sources":["./src/app/info/maintenance-info/maintenance-info.html","./src/app/info/maintenance-info/maintenance-info.module.ts","./src/app/info/maintenance-info/maintenance-info.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,0L;;;;;;;;;;;;;;;;;;;;;ACA0B;AAEgB;AACwB;AAC1B;AACR;AAE/C,IAAM,MAAM,GAAW;IACtB;QACC,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,qEAAmB;KAC9B;CACD,CAAC;AAQF;IAAA;IAAwC,CAAC;IAA5B,yBAAyB;QANrC,8DAAQ,CAAC;YACT,YAAY,EAAE,CAAC,qEAAmB,CAAC;YACnC,OAAO,EAAE,CAAC,4DAAY,EAAE,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,8FAAW,CAAC;YACnE,eAAe,EAAE,CAAC,qEAAmB,CAAC;YACtC,OAAO,EAAE,CAAC,qEAAmB,CAAC;SAC9B,CAAC;OACW,yBAAyB,CAAG;IAAD,gCAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;ACpBI;AACsB;AACkC;AAC1C;AACf;AAMzC;IAGC,6BACS,kBAAsC,EACtC,KAAY,EACZ,MAAc;QAFd,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,UAAK,GAAL,KAAK,CAAO;QACZ,WAAM,GAAN,MAAM,CAAQ;QAEtB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,SAAS,EAAE,CAAC;IAClB,CAAC;IAEK,wCAAU,GAAhB;;;;;;wBACC,SAAI;wBAAW,WAAM,IAAI,CAAC,kBAAkB,CAAC,UAAU,CACtD,IAAI,CAAC,KAAK,CAAC,eAAe,EAC1B,qEAAW,CAAC,8BAA8B,CAAC,CAC3C;;wBAHD,GAAK,OAAO,GAAG,SAGd,CAAC;;;;;KACF;IAEa,uCAAS,GAAvB;;;;gBACC,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;;;;oCACZ,WAAM,IAAI,CAAC,kBAAkB,CAAC,SAAS,CACrD,qEAAW,CAAC,mBAAmB,CAAC,EAChC,qEAAW,CAAC,8BAA8B,CAAC,CAC3C;;gCAHK,MAAM,GAAG,SAGd;gCACD,OAAO,CAAC,IAAI,CACX,qBAAmB,IAAI,CAAC,KAAK,CAAC,eAAe,WAAM,MAAQ,CAC3D,CAAC;gCAEF,IAAI,CAAC,MAAM,EAAE;oCACZ,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oCAC7B,IAAI,CAAC,KAAK,CAAC,oBAAoB,EAAE,CAAC;oCAClC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;iCAC9B;;;;qBACD,EAAE,IAAI,CAAC,CAAC;;;;KACT;IAED,8CAAgB,GAAhB;QACC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC9B,CAAC;;gBAnC4B,+GAAkB;gBAC/B,6DAAK;gBACJ,sDAAM;;IANX,mBAAmB;QAJ/B,+DAAS,CAAC;YACV,QAAQ,EAAE,uBAAuB;YACjC,iPAAoC;SACpC,CAAC;uFAK4B,+GAAkB;YAC/B,6DAAK;YACJ,sDAAM;OANX,mBAAmB,CAwC/B;IAAD,0BAAC;CAAA;AAxC+B","file":"maintenance-info-maintenance-info-module.js","sourcesContent":["export default \"<div\\n\\t*ngIf=\\\"message\\\"\\n\\tclass=\\\"maintenance-message-container\\\"\\n\\t[innerHTML]=\\\"message | safe: 'html'\\\"\\n></div>\\n\"","import { NgModule } from '@angular/core';\n\nimport { MaintenanceInfoPage } from './maintenance-info';\nimport { PipesModule } from '@modules/client.common.angular2/pipes/pipes.module';\nimport { Routes, RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\n\nconst routes: Routes = [\n\t{\n\t\tpath: '',\n\t\tcomponent: MaintenanceInfoPage,\n\t},\n];\n\n@NgModule({\n\tdeclarations: [MaintenanceInfoPage],\n\timports: [CommonModule, RouterModule.forChild(routes), PipesModule],\n\tentryComponents: [MaintenanceInfoPage],\n\texports: [MaintenanceInfoPage],\n})\nexport class MaintenanceInfoPageModule {}\n","import { Component } from '@angular/core';\nimport { environment } from '../../../environments/environment';\nimport { MaintenanceService } from '@modules/client.common.angular2/services/maintenance.service';\nimport { Store } from '../../../services/store.service';\nimport { Router } from '@angular/router';\n\n@Component({\n\tselector: 'page-maintenance-info',\n\ttemplateUrl: 'maintenance-info.html',\n})\nexport class MaintenanceInfoPage {\n\tpublic message: string;\n\tpublic interval;\n\tconstructor(\n\t\tprivate maintenanceService: MaintenanceService,\n\t\tprivate store: Store,\n\t\tprivate router: Router\n\t) {\n\t\tthis.getMessage();\n\t\tthis.getStatus();\n\t}\n\n\tasync getMessage() {\n\t\tthis.message = await this.maintenanceService.getMessage(\n\t\t\tthis.store.maintenanceMode,\n\t\t\tenvironment['SETTINGS_MAINTENANCE_API_URL']\n\t\t);\n\t}\n\n\tprivate async getStatus() {\n\t\tthis.interval = setInterval(async () => {\n\t\t\tconst status = await this.maintenanceService.getStatus(\n\t\t\t\tenvironment['SETTINGS_APP_TYPE'],\n\t\t\t\tenvironment['SETTINGS_MAINTENANCE_API_URL']\n\t\t\t);\n\t\t\tconsole.warn(\n\t\t\t\t`Maintenance on '${this.store.maintenanceMode}': ${status}`\n\t\t\t);\n\n\t\t\tif (!status) {\n\t\t\t\tclearInterval(this.interval);\n\t\t\t\tthis.store.clearMaintenanceMode();\n\t\t\t\tthis.router.navigateByUrl('');\n\t\t\t}\n\t\t}, 5000);\n\t}\n\n\tionViewWillLeave() {\n\t\tclearInterval(this.interval);\n\t}\n}\n"],"sourceRoot":"webpack:///"}